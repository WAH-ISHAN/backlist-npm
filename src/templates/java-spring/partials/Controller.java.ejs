// Auto-generated by create-backlist
package <%= group %>.<%= projectName %>.controller;

import <%= group %>.<%= projectName %>.model.<%= controllerName %>;
import <%= group %>.<%= projectName %>.repository.<%= controllerName %>Repository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;

@RestController
@CrossOrigin(origins = "*") // Allow all origins for development
@RequestMapping("/api/<%= controllerName.toLowerCase() %>s")
public class <%= controllerName %>Controller {

    @Autowired
    private <%= controllerName %>Repository repository;

    @GetMapping
    public List<<%= controllerName %>> getAll<%= controllerName %>s() {
        return repository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<<%= controllerName %>> get<%= controllerName %>ById(@PathVariable Long id) {
        Optional<<%= controllerName %>> item = repository.findById(id);
        return item.map(ResponseEntity::ok).orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public ResponseEntity<<%= controllerName %>> create<%= controllerName %>(@RequestBody <%= controllerName %> newItem) {
        <%= controllerName %> savedItem = repository.save(newItem);
        return new ResponseEntity<>(savedItem, HttpStatus.CREATED);
    }

    @PutMapping("/{id}")
    public ResponseEntity<<%= controllerName %>> update<%= controllerName %>(@PathVariable Long id, @RequestBody <%= controllerName %> updatedItem) {
        return repository.findById(id)
                .map(item -> {
                    // Manually map fields to update. For simplicity, we assume all fields are updatable.
                    <% model.fields.forEach(field => { %>
                    item.set<%= field.name.charAt(0).toUpperCase() + field.name.slice(1) %>(updatedItem.get<%= field.name.charAt(0).toUpperCase() + field.name.slice(1) %>());
                    <% }); %>
                    <%= controllerName %> savedItem = repository.save(item);
                    return ResponseEntity.ok(savedItem);
                })
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> delete<%= controllerName %>(@PathVariable Long id) {
        if (!repository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        repository.deleteById(id);
        return ResponseEntity.noContent().build();
    }
}