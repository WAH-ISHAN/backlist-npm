// Auto-generated by create-backlist v5.1

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

<%
function mapPrismaType(t) {
  const x = String(t || '').toLowerCase();
  if (x === 'number' || x === 'int' || x === 'integer') return 'Int';
  if (x === 'float' || x === 'double') return 'Float';
  if (x === 'boolean' || x === 'bool') return 'Boolean';
  if (x === 'date' || x === 'datetime') return 'DateTime';
  return 'String';
}

function safeName(n) {
  return String(n || '').replace(/[^a-zA-Z0-9_]/g, '');
}
%>

<% modelsToGenerate.forEach(model => { %>
model <%= safeName(model.name) %> {
  id        String   @id @default(cuid())

<% (model.fields || []).forEach(field => { 
  const fname = safeName(field.name);
  const prismaType = mapPrismaType(field.type);
  const optional = field.isOptional ? '?' : '';
  const unique = field.isUnique ? ' @unique' : '';
-%>
  <%= fname %> <%= prismaType %><%= optional %><%= unique %>
<% }); -%>

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
<% }); %>